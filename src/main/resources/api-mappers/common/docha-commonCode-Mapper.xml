<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ohdocha.admin.mapper.DochaAdminCommonCodeMapper">

	<!-- 공통코드리스트  -->
	<select id="selectCommonCodeInfo"  parameterType="commonCodeRequest" 
      			   				  	 resultType="commonCodeResponse">
      	<![CDATA[
					SELECT     
							   IFNULL(CODE_IDX    , '' ) AS CODE_IDX
							,  IFNULL(RT_CODE     , '' ) AS RT_CODE
							,  IFNULL(P_CODE      , '' ) AS P_CODE
							,  IFNULL(CODE        , '' ) AS CODE
							,  IFNULL(CODE_VALUE  , '' ) AS CODE_VALUE
							,  IFNULL(DESCRIPT    , '' ) AS DESCRIPT
							,  IFNULL(SORT        , '' ) AS SORT
							,  IFNULL(ROOT_YN     , '' ) AS ROOT_YN
					FROM 
							DC_COMMON_CODE
         ]]>
         <trim prefix="WHERE" prefixOverrides="AND|OR">
         	<if test="codeIdx != null and codeIdx != ''">
	     		<![CDATA[ CODE_IDX = #{codeIdx} ]]>
	        </if>
	        <if test="rtCode != null and rtCode != ''">
	     		<![CDATA[ AND RT_CODE = #{rtCode} ]]>
	        </if>
	        <if test="pCode != null and pCode != ''">
	     		<![CDATA[ AND P_CODE = #{pCode} ]]>
	        </if>
	        <if test="code != null and code != ''">
	     		<![CDATA[ AND CODE = #{code} ]]>
	        </if>
	        <if test="codeValue != null and codeValue != ''">
	     		<![CDATA[ AND CODE_VALUE = #{codeValue} ]]>
	        </if>
	        <if test="descript != null and descript != ''">
	     		<![CDATA[ AND DESCRIPT = #{descript} ]]>
	        </if>
       	</trim>						  		
	</select>    
	
	<update id="updateCommonCodeInfo" parameterType="commonCodeRequest" >
		<![CDATA[  UPDATE DC_COMMON_CODE  ]]>
			<trim prefix="SET" suffixOverrides=",">
				<if test="code 		!= null"><![CDATA[  CODE		= #{code},  		]]></if>
				<if test="codeValue != null"><![CDATA[  CODE_VALUE	= #{codeValue},  	]]></if>
			</trim>
		<trim prefix="WHERE" prefixOverrides="AND|OR">
			<if test="codeIdx != null and codeIdx != ''">
	     		<![CDATA[ CODE_IDX = #{codeIdx} ]]>
	        </if>
		</trim>
	</update>

    <insert  id="insertCommonCodeInfo" parameterType="commonCodeRequest">			
	<![CDATA[ 
	     INSERT INTO DC_COMMON_CODE (
	     	   RT_CODE
			,  P_CODE
			,  CODE
			,  CODE_VALUE
		) VALUES (
				#{rtCode}
			,	#{pCode}              
			,  	#{code}    
			,  	#{codeValue}
		)
	]]>
    </insert>
	
</mapper>